# ⚠️ 구버전 문서 (Phase 1 Step 4/5/8 완료 반영)

> **경고**: 이 문서는 2025-11-04에 작성된 구버전입니다. 현재 상태는 Step 4, 5, 8이 모두 완료되었습니다.
>
> **최신 정보**:
> - ✅ Step 4 완료: Backend `APISignal` 모델, Frontend `SignalsTable.jsx` (정렬, 색상)
> - ✅ Step 5 완료: `POST /api/backtests/run` 동기 방식 (현재 구현 유지)
> - ✅ Step 8 완료: OHLCV 테스트 데이터 생성 및 E2E 검증
> - ⏸️ Step 6 보류: Phase 3에서 차트 확장 완료 (단, Step 6 Equity Curve와의 관계 재평가 필요)
>
> **상세 증거**:
> - `IMPLEMENTATION_STATUS_VERIFICATION.md` - 코드 검증 및 파일 경로
> - `STEP8_INTEGRATION_TEST_RESULTS.md` - 테스트 데이터 및 API 검증
> - `ri_5.md` - 최신 Step 상태 (이 문서 참고)
> - `ri_15.md` - Phase 2 완료 상태 (이 문서 참고)
> - `ri_16.md` - Issue #25 해결 계획 (이 문서 참고)

---

# Issue #5 구현 진행: 3가지 중요 결정 필요 (구버전 - 참고용)

**원본 상태**: 🟡 분석 완료, 결정 대기
**현재 상태**: ✅ Step 4/5/8 완료
**분석 자료**: `IMPLEMENTATION_STATUS_ANALYSIS.md` 참고

---

## 📋 현재 상황 요약

### ✅ 완료된 것 (Step 1-3, 7)
- BacktestResults 컴포넌트 구현
- 지표 테이블 (승률, 수익률, 낙폭, 샘플)
- 포맷팅 유틸리티
- CSS 스타일링 + 반응형 디자인
- Docker 통합

### ❌ 미완료된 것
- **Step 4**: 신호 목록 테이블 (Backend API 확장 필요)
- **Step 5**: /api/backtests/latest 플로우 vs 현재 구현 불일치
- **Step 6**: 차트 구현 (선택사항)
- **Step 8**: 실제 데이터로 테스트 (데이터 파일 필요)

---

## 🎯 3가지 결정 필요

### Q1: Step 5 API 플로우를 어떻게 할 것인가?

#### **계획 (ri_5.md)**
```
GET /api/backtests/latest
  ↓
GET /api/backtests/{run_id}
  ↓
상세 결과 표시
```

#### **현재 (App.jsx)**
```
POST /api/backtests/run
  ↓
즉시 결과 받아서 표시
```

#### **선택지**

**A) 현재 구현 유지** ⭐ **추천**
```
장점:
  ✓ 간단하고 직관적
  ✓ 실제 동작 완벽
  ✓ API 호출 1회 (빠름)
  ✓ 지금 당장 사용 가능

단점:
  ✗ 계획 문서와 불일치
  ✗ 결과 재조회 불가능

필요 작업:
  → ri_5.md Step 5만 수정 (코드 수정 없음)

추정 시간: 1시간
```

**B) /api/backtests/latest 추가 구현**
```
장점:
  ✓ 계획과 일치
  ✓ 재실행/재조회 가능
  ✓ 체계적인 API 설계

단점:
  ✗ Backend 엔드포인트 추가 필요
  ✗ Frontend 로직 수정
  ✗ API 호출 2회 (약간 느림)

필요 작업:
  → Backend: /api/backtests/latest 엔드포인트 구현
  → Frontend: App.jsx 로직 수정
  → 테스트

추정 시간: 4시간
```

**C) 분리 플로우** (Phase 2 이후 권장)
```
- 실행: POST /api/backtests/run (A처럼 빠름)
- 재조회: latest → detail (B처럼 체계적)

→ 가장 복잡하므로 일단 보류
```

**🔴 제1 결정: A 또는 B?**

---

### Q2: Step 4 신호 목록 테이블은 언제 구현할 것인가?

#### **현재 상황**
- Backend API가 `signals: int` (개수만 반환)
- 개별 신호 데이터 (symbol, type, timestamp, price, return) 없음
- Frontend는 준비 완료 (포맷팅 함수 있음, 테이블 코드만 필요)

#### **필요한 것**
```
Backend 확장:
  1. Signal 스키마 정의 (type, timestamp, entry_price, exit_price, return)
  2. /api/backtests/{run_id} 응답에 signals 배열 추가
  3. 실제 신호 데이터 계산 및 반환

Frontend:
  1. 신호 테이블 컴포넌트 작성
  2. 정렬 기능 (시간순, 수익률순)
  3. BacktestResults에 통합
```

#### **선택지**

**A) 즉시 시작 (Phase 1B)**
```
다음 주부터 Backend/Frontend 동시 진행
- Backend: Signal 스키마 + 데이터 반환
- Frontend: 테이블 컴포넌트 구현
- 예상 시간: 1~2주
- 우선순위: 높음 (핵심 기능)
```

**B) Step 4 건너뛰고 차트부터 (선택사항)**
```
지금: 차트 구현 (선택)
나중: Phase 2에서 신호 테이블
- 차트가 더 중요하다면 선택
- 예상 시간: 차트 1주 + 테이블 2주
```

**C) 데이터 확보 후 결정**
```
먼저: OHLCV 테스트 데이터 준비
그 후: Step 4 vs Step 6 우선순위 재평가
```

**🔴 제2 결정: 언제 시작할 것인가? (A/B/C)**

---

### Q3: Step 6 차트는 필수인가 (선택사항)?

#### **현재 상황**
- Recharts 미설치
- 시계열 데이터 없음 (신호 데이터도 없음)
- Issue #5에서는 "선택사항"으로 명시됨

#### **선택지**

**A) 필수 기능 (P1)**
```
근거:
  - 사용자 가시성 높음
  - 데이터 분석에 도움

진행:
  1. Step 4 (신호 테이블) 먼저
  2. 그 후 차트 구현
  3. 예상 시간: 1주

우선순위: Step 4 → Step 6
```

**B) 선택사항으로 유지 (P2)**
```
근거:
  - 지표 테이블로 기본 요구사항 충족
  - Phase 2에서 추가 가능

진행:
  1. Step 4 (신호 테이블) 먼저
  2. 필요시 나중에 차트 추가
  3. 예상 시간: 2주 후 별도 검토

우선순위: Step 4 → (선택) Step 6
```

**C) 생략하고 다른 기능 (P3)**
```
근거:
  - 선택사항이므로 생략 가능
  - 다른 이슈 우선

진행:
  - 차트 없이 Phase 1 종료
  - 사용자 요청 시 Phase 2에 추가
```

**🔴 제3 결정: 필수인가 선택사항인가? (A/B/C)**

---

## 📊 권장 조합

### 시나리오 1: 빠른 완성 (최소 구현)
```
Q1: A (현재 구현 유지)
Q2: A (즉시 시작)
Q3: B (선택사항)

예상 시간:
  - Step 5 문서 수정: 1시간
  - Step 4 구현: 1~2주
  - 합계: 2주 (Phase 1B 완료)

장점: Phase 1 빠르게 완료
단점: 차트 없음
```

### 시나리오 2: 완전한 기능 (권장)
```
Q1: A (현재 구현 유지)
Q2: A (즉시 시작)
Q3: A (필수로 포함)

예상 시간:
  - Step 5 문서 수정: 1시간
  - Step 4 구현: 1~2주
  - Step 6 구현: 1주
  - 합계: 3~4주 (모든 기능 포함)

장점: 전체 기능 완성
단점: 시간 소요
```

### 시나리오 3: 계획 준수
```
Q1: B (/api/backtests/latest)
Q2: A (즉시 시작)
Q3: A (필수)

예상 시간:
  - Step 5 Backend/Frontend: 4시간
  - Step 4 구현: 2주
  - Step 6 구현: 1주
  - 합계: 3.5~4주 (계획 + 완성)

장점: 계획 준수 + 완전 기능
단점: 가장 복잡
```

---

## 📝 지금 바로 필요한 것

### 1. 3가지 질문에 답변

```
Q1: A 또는 B?
    → A (빠름) 또는 B (계획)

Q2: A, B, C?
    → A (지금), B (나중), C (재평가)

Q3: A, B, C?
    → A (필수), B (선택), C (생략)
```

### 2. 최종 선택 시
- ri_5.md 업데이트 (Step 4, 5, 6 계획 확정)
- GitHub Issue 상태 업데이트
- 개발 일정 수립

---

## ✅ 최종 체크리스트

결정이 필요할 때까지의 상태:

| Step | 항목 | 상태 | 코드 |
|------|------|------|------|
| 1 | 환경/스키마 | ✅ 완료 | 변경 없음 |
| 2 | 기본 구조 | ✅ 완료 | 변경 없음 |
| 3 | 지표 테이블 | ✅ 완료 | 변경 없음 |
| 4 | 신호 테이블 | ⏳ 결정 후 | 대기 |
| 5 | API 연동 | ⏳ 결정 후 | 문서만 수정 |
| 6 | 차트 | ⏳ 결정 후 | 대기 |
| 7 | 스타일링 | ✅ 완료 | 변경 없음 |
| 8 | 테스트 | ⏳ 데이터 대기 | 대기 |

---

## 🚀 대기 중

**현재 상태**:
- Backend + Frontend 컨테이너 실행 중 ✅
- 코드 모두 정상 작동 ✅
- 3가지 결정 대기 중 🟡

**언제든 시작 가능**:
```
Q1-Q3 답변 → ri_5.md 업데이트 → 개발 시작
```

---

**다음 단계**:
1. 세 가지 질문에 답변해주세요
2. 우선순위 확정
3. 개발 일정 수립

준비가 되셨으면 알려주세요! 🚀
