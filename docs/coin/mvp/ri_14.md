# Issue #21: Phase 1 정리 - Issue #5 Step 4/5 검증 및 Step 6 Phase 2 전환 계획

**작성일**: 2025-11-07
**상태**: 🔄 진행 중 (PR 검토 대기)
**관련 이슈**: #5, #21
**관련 PR**: #22 (검토 필요)

---

## 1. 이슈 정보

### 메타데이터
- **번호**: #21
- **제목**: [Phase 1 정리] Issue #5 Step 4/5 검증 및 Step 6 Phase 2 전환 계획
- **상태**: OPEN → PR #22 생성 완료 (머지 대기)
- **생성일**: 2025-11-07
- **담당자**: 없음 (PR 검토 필요)

---

## 2. 문제 이해

### 핵심 요구사항
Issue #5 "React 결과 테이블 및 차트 컴포넌트 구현"의 **Phase 1 마무리 작업**:

1. **Step 4 (신호 테이블)**: 구현 완료 → 실제 동작 검증 필요
2. **Step 5 (API 연동)**: 동기 방식 구현 완료 → 문서 현행화 필요
3. **Step 6 (차트)**: Phase 2로 연기 → 전환 가이드 작성 필요

### 현재 상태 (2025-11-07 기준)
- ✅ Step 1-3: 기본 구조 및 지표 테이블 완료
- ✅ Step 4: 신호 테이블 구현 완료 → **검증 완료** (30개 신호 생성)
- ✅ Step 5: 동기 API 연동 완료 → **문서화 완료**
- ⏸️ Step 6: 차트 미구현 → **Phase 2 가이드 작성 완료**

### 전제 조건
- ✅ Docker Compose 환경 (준비됨)
- ✅ 테스트 데이터 생성 (BTC_KRW, ETH_KRW, 60일)
- ✅ Backend API 검증 (동기 방식 작동 확인)

---

## 3. 해결 계획 (실행 완료)

### 📋 Phase 1: Step 4 신호 테이블 검증 (4-6시간) ✅ **완료**

**목표**: SignalsTable 컴포넌트와 Backend API 동작 검증

**실행 결과**:
- ✅ Docker Compose 환경 기동
- ✅ 테스트 데이터 생성: BTC_KRW, ETH_KRW (각 60일)
- ✅ Backend API 실행: `POST /api/backtests/run` 정상 작동
- ✅ 신호 생성 확인: 30개/심볼 (BTC_KRW, ETH_KRW)
- ✅ Frontend SignalsTable: 6개 컬럼 + 정렬 + 색상 코딩 검증
- ✅ 성과곡선 데이터: performance_curve 30개 포인트 확인

**산출물**:
- ✅ `step4_verification_report.md` (신규, 2025-11-07)
  - 상세 검증 결과
  - API 응답 구조 분석
  - Frontend 컴포넌트 검증

**확인 방법**: 모든 Acceptance Criteria 통과 ✅

---

### 📝 Phase 2: Step 5 문서 현행화 (2-3시간) ✅ **완료**

**목표**: `ri_5.md`에 현재 구현된 API 연동 방식 문서화

**실행 결과**:
- ✅ `ri_5.md` Step 5 섹션 업데이트 (410줄 확장)
- ✅ 동기 API 플로우 상세 문서화
  - 요청/응답 예시 코드 포함
  - BacktestResponse 스키마 정의
  - APISignal 필드 명시
- ✅ Phase 2 비동기 API 아키텍처 계획 추가
  - POST /api/backtests/run-async (미구현)
  - GET /api/backtests/status/{task_id} (미구현)
  - WebSocket 실시간 진행률 (선택사항)

**산출물**:
- ✅ 업데이트된 `ri_5.md`

**확인 방법**: Step 5 섹션이 현재 구현과 100% 일치 ✅

---

### 📊 Phase 3: Step 6 Phase 2 가이드 작성 (3-4시간) ✅ **완료**

**목표**: 차트 구현을 Phase 2로 연기한 이유 및 향후 계획 문서화

**실행 결과**:
- ✅ `step6_chart_guide.md` 생성 (신규, 600줄+)
  - Phase 2 의사결정 기준 수립
  - Recharts 라이브러리 선택 (이유 포함)
  - Equity Curve 차트 구현 가이드
  - 예제 코드 (EquityChart 컴포넌트)
  - 개발 일정: 3-5일, 필요 리소스 정의
- ✅ `ri_5.md` Step 6 섹션 업데이트
  - "Phase 2 재평가" 상태로 변경
  - step6_chart_guide.md 링크 추가

**산출물**:
- ✅ `step6_chart_guide.md` (신규)
- ✅ 업데이트된 `ri_5.md`

**확인 방법**: Phase 2 팀이 가이드로 바로 구현 가능 ✅

---

### 🚀 Phase 4: GitHub PR 생성 (1-2시간) 🔄 **진행 중 (검토 대기)**

**목표**: 문서 변경사항을 PR로 등록 및 검토 준비

**실행 결과**:
- ✅ 커밋 생성: `docs: Complete Phase 1 finalization for Issue #5...`
  - **커밋 SHA**: 75d49d1
  - **변경 파일**:
    - `docs/coin/mvp/ri_14.md` (신규, 이슈 #21 상세 계획)
    - `docs/coin/mvp/step4_verification_report.md` (신규, Step 4 검증 리포트)
    - `docs/coin/mvp/step6_chart_guide.md` (신규, Step 6 가이드)
    - `docs/coin/mvp/ri_5.md` (수정, Step 5/6 업데이트)
  - **추가/변경**: 1,394줄
- ✅ 브랜치 push: `coin-21` → origin/coin-21
- ✅ PR 생성: **#22**
  - **URL**: https://github.com/sunbangamen/coin_hts/pull/22
  - **상태**: 🔄 **검토 필요** (아직 main에 머지되지 않음)
  - **진행도**: PR 생성 ✅ → 검토 대기 🔄 → 머지 예정 ⏳

**담당자 액션 필요** (웹 브라우저에서 실행):
- [ ] PR #22 링크 열기
- [ ] 변경사항 리뷰
- [ ] "승인" 또는 변경 요청 작성
- [ ] 승인 후 "Merge pull request" 클릭
- [ ] Issue #5 체크박스 업데이트 (선택사항)

**산출물**:
- ✅ PR #22 (생성 완료, 검토 대기)
- ⏳ 커밋 75d49d1 (main에 머지 대기)

---

### 🔧 Phase 5: 누락 사항 보완 (필요 시, 0-8시간) ⏳ **예정 (필요 없음)**

**목표**: Phase 1 검증에서 발견된 이슈 수정

**현황**:
- ✅ Phase 1 검증 중 발견된 이슈: **없음**
- ✅ Backend API: 정상 작동
- ✅ Frontend SignalsTable: 정상 렌더링
- ✅ API 응답 구조: 완벽 일치

**결론**: Phase 5 작업 **불필요** ✅

---

## 4. 위험 요소 및 불확실성

| 위험 요소 | 영향 | 대응 방안 | 상태 |
|----------|------|----------|------|
| 신호 생성 실패 | 높음 | 전략 파라미터 조정 | ✅ 해결 (30개 신호 생성) |
| Frontend 정렬/색상 미동작 | 중간 | SignalsTable.jsx 디버깅 | ✅ 해결 (모든 기능 작동) |
| 대량 신호(1000개+) 성능 | 낮음 | 페이지네이션/가상화 (Phase 2) | ⏳ Phase 2 검토 |
| Phase 2 비동기 API 범위 | 중간 | 기술 검증 및 가이드 작성 완료 | ✅ 해결 (가이드 포함) |
| 차트 라이브러리 선택 | 낮음 | Recharts 기술 검증 완료 | ✅ 해결 (가이드 포함) |

---

## 5. 예상 일정 (총 10-23시간)

| Phase | 작업 | 예상 시간 | 실제 상태 |
|-------|------|---------|---------|
| Phase 1 | Step 4 검증 | 4-6시간 | ✅ 완료 |
| Phase 2 | Step 5 문서화 | 2-3시간 | ✅ 완료 |
| Phase 3 | Step 6 가이드 | 3-4시간 | ✅ 완료 |
| Phase 4 | PR/검토 | 1-2시간 | 🔄 진행 중 (검토 대기) |
| Phase 5 | 이슈 보완 | 0-8시간 | ✅ 불필요 |
| **합계** | **전체** | **10-23시간** | **10-15시간 소요** |

---

## 6. 현재 진행 현황 (체크리스트)

### Phase 1-3 완료 ✅
- [x] Step 4 검증: Backend API 테스트 완료
- [x] Step 4 검증: SignalsTable 컴포넌트 검증
- [x] Step 4 검증: 성과곡선 데이터 검증
- [x] Step 5 문서화: 동기 API 플로우 문서화
- [x] Step 5 문서화: BacktestResponse 스키마 정의
- [x] Step 5 문서화: Phase 2 비동기 API 계획 추가
- [x] Step 6 가이드: step6_chart_guide.md 작성
- [x] Step 6 가이드: Recharts 라이브러리 비교 분석
- [x] Step 6 가이드: 구현 가이드 및 예제 코드 작성

### Phase 4 진행 중 🔄
- [x] 커밋 생성 (75d49d1)
- [x] 브랜치 push (origin/coin-21)
- [x] PR 생성 (#22)
- [ ] **PR 검토** (담당자 필요)
- [ ] **PR 머지** (검토 후)

### Issue #5 상태 업데이트 (필요시) ⏳
- [ ] GitHub Issue #5 열기
- [ ] Step 4 체크박스 체크
- [ ] Step 5 체크박스 체크
- [ ] Step 6 상태를 "Phase 2 재평가"로 변경
- [ ] Issue 코멘트에 ri_14.md 링크 추가

---

## 7. 다음 단계 (운영 절차)

### 즉시 필요한 작업 (담당자)

1. **PR #22 검토** (웹 브라우저)
   - URL: https://github.com/sunbangamen/coin_hts/pull/22
   - 변경 파일: 4개
   - 확인 사항:
     - ri_14.md: Issue #21 상세 계획
     - step4_verification_report.md: Step 4 검증 결과
     - step6_chart_guide.md: Step 6 가이드
     - ri_5.md: Step 5/6 업데이트

2. **PR 머지** (가능하면 함께 진행)
   - PR 승인 후 "Merge pull request" 클릭
   - 커밋 75d49d1이 main에 통합

3. **Issue #5 상태 업데이트** (선택사항)
   - Step 4/5 체크박스 체크
   - Step 6을 "Phase 2 재평가"로 표시

### Phase 2 준비 (향후)

1. **비동기 API 구현** (예상 2-3일)
   - POST /api/backtests/run-async
   - GET /api/backtests/status/{task_id}
   - 상세는 step6_chart_guide.md 참조

2. **Equity Curve 차트 추가** (예상 3-5일, 권장)
   - Recharts 통합
   - EquityChart 컴포넌트 구현
   - BacktestResults에 통합
   - 자세한 가이드는 step6_chart_guide.md 참조

3. **신호 오버레이/최대 낙폭** (선택사항)
   - 차트에 buy/sell 신호 포인트 추가
   - Drawdown 영역 표시

---

## 8. 문서 및 산출물 정리

### 생성된 파일
| 파일 | 설명 | 라인수 | 용도 |
|------|------|-------|------|
| `ri_14.md` | Issue #21 상세 계획 | ~250 | 현재 문서 |
| `step4_verification_report.md` | Step 4 검증 리포트 | ~350 | 검증 결과 |
| `step6_chart_guide.md` | Step 6 차트 가이드 | ~600 | Phase 2 계획 |
| `ri_5.md` (수정) | Issue #5 업데이트 | +410줄 | 동기/비동기 API 문서 |

### 제공하는 정보
- ✅ Backend API 검증 결과 (30개 신호, 동기 플로우)
- ✅ Frontend SignalsTable 검증 (6개 컬럼, 정렬, 색상)
- ✅ Phase 2 비동기 API 아키텍처 설계서
- ✅ Recharts 기반 차트 구현 가이드
- ✅ 개발 일정 및 리소스 추정

---

## 9. 담당자 워크플로 가이드

### 목표
**PR을 통한 변경사항 통합** → **Phase 2 준비 완료**

### 단계별 절차

```
[현재]
Step 1: 로컬 상태 확인
  git status → "nothing to commit, working tree clean"
  git log -1 → 75d49d1 (최신 커밋)

Step 2: 원격 상태 확인
  git branch -v → coin-21 이 origin/coin-21 에 동기됨

Step 3: PR 검토 (웹 브라우저)
  https://github.com/sunbangamen/coin_hts/pull/22 열기
  변경사항 확인 → "Approve" 클릭

Step 4: PR 머지
  "Merge pull request" 클릭
  커밋 75d49d1이 main에 통합됨

Step 5: 로컬 동기화
  git fetch origin
  git log --oneline | head → "Merge pull request #22" 확인

[완료]
Phase 1 정리 완료 ✅
Phase 2 준비 시작 🚀
```

### 문서 작성 원칙 (향후 참고)

**원칙**:
1. 문서는 현실의 작업 상태를 정확히 반영
2. "완료", "진행 중", "예정"을 명확히 구분
3. 추정 시간은 실제 소요 시간과 함께 기록
4. PR/커밋 정보는 GitHub URL과 함께 명시
5. 담당자 액션이 필요한 부분은 명확히 표시

**업데이트 타이밍**:
- 각 Phase 완료 후 즉시 문서 업데이트
- PR 생성 전 상태를 명확히 기록
- 머지 후 "완료" 표시

---

## 10. 참고 자료

### 관련 문서
- Issue #5: React 결과 테이블 및 차트 컴포넌트 구현
- Issue #21: Phase 1 정리 (현재 이슈)
- PR #22: docs: Complete Phase 1 finalization

### 구현 가이드
- `step6_chart_guide.md`: Phase 2 차트 구현 상세 가이드
- `step4_verification_report.md`: Step 4 검증 상세 결과
- `ri_5.md`: Issue #5 전체 진행 현황

### 기술 참고
- Backend API: POST /api/backtests/run (동기)
- Frontend: SignalsTable, BacktestResults 컴포넌트
- 라이브러리: Recharts (차트 권장)

---

**마지막 업데이트**: 2025-11-07
**다음 검토**: PR #22 머지 후 Phase 2 시작
