# Issue #21: Phase 1 정리 - Issue #5 Step 4/5 검증 및 Step 6 Phase 2 전환 계획

## 1. 이슈 정보

### 메타데이터
- **번호**: #21
- **제목**: [Phase 1 정리] Issue #5 Step 4/5 검증 및 Step 6 Phase 2 전환 계획
- **상태**: OPEN
- **생성일**: 2025-11-07
- **담당자**: 없음
- **라벨**: 없음

---

## 2. 문제 이해

### 핵심 요구사항
이 이슈는 **Issue #5 "React 결과 테이블 및 차트 컴포넌트 구현"의 Phase 1 마무리 작업**입니다. 구체적으로:

1. **Step 4 (신호 테이블)**: 이미 구현되었으나 실제 동작 테스트 및 검증 필요
2. **Step 5 (API 연동)**: 완료되었으나 문서 업데이트 필요
3. **Step 6 (차트)**: Phase 2로 연기되었으며, 이에 대한 전환 가이드 작성 필요

### 현재 상태
- ✅ Step 1-3: 기본 구조 및 지표 테이블 완료
- ✅ Step 4: 신호 테이블 Backend/Frontend 구현 완료 (검증 대기)
- ✅ Step 5: 동기 API 연동 완료 (문서화 필요)
- ⏸️ Step 6: 차트 미구현 (Phase 2 재평가 예정)

### 전제 조건
- Docker Compose 또는 로컬 개발 환경 필요
- OHLCV 테스트 데이터 (BTC_KRW, ETH_KRW, 2024년 60일치)
- 신호 생성을 위한 전략 파라미터 조정

---

## 3. 해결 계획

### 📋 Phase 1: Step 4 신호 테이블 검증 (4-6시간)
**목표**: SignalsTable 컴포넌트와 Backend API가 정상 동작하는지 실제 테스트로 검증

**작업 단계**:
1. Docker Compose 환경 기동 및 데이터 확인
2. 백테스트 실행 (`POST /api/backtests/run`)하여 신호 생성 확인
3. Backend API 응답 검증:
   - `symbols` 배열의 각 `SymbolResult`에 `signals: List[APISignal]`가 포함되는지 확인
   - APISignal 필드: symbol, type, timestamp, entry_price, exit_price, return_pct (strategy 정보는 상위 `BacktestResponse.strategy`를 참고)
   - 실행 메타데이터(run_id, total_signals, execution_time, metadata)와 요청 파라미터가 응답에 정확히 반영되는지 확인
4. Frontend 검증:
   - SignalsTable 6개 컬럼 렌더링
   - 정렬 기능 (timestamp, return_pct, type) 동작
   - 색상 코딩 (buy/sell, 양수/음수) 정상 표시
   - 신호 없음 상태 UI 처리
   - 다중 심볼 렌더링
5. 검증 리포트 작성 (체크리스트, 스크린샷, 로그)

**예상 산출물**:
- 검증 리포트 (`docs/coin/mvp/step4_verification_report.md`)
- 발견된 이슈 목록 (있을 경우)

**확인 방법**: 모든 Acceptance Criteria (Task 3.1) 체크리스트 통과

---

### 📝 Phase 2: Step 5 문서 현행화 (2-3시간)
**목표**: `ri_5.md`에 현재 구현된 API 연동 방식을 정확히 문서화

**작업 단계**:
1. `docs/coin/mvp/ri_5.md` Step 5 섹션 업데이트:
   - 현재 동기 플로우 (`POST /api/backtests/run` → 즉시 응답) 명시
   - 코드 스니펫 추가 (Frontend 요청, Backend 응답 예시)
2. BacktestResponse/APISignal 스키마 예시 추가
3. Phase 2 확장 계획 추가:
   - 비동기 API (`POST /api/backtests/run-async` → task_id → `GET /api/backtests/status/{task_id}` → 필요 시 `GET /api/backtests/{run_id}`)
   - WebSocket 실시간 진행률 표시 (선택)

**예상 산출물**:
- 업데이트된 `ri_5.md`

**확인 방법**: Step 5 섹션이 현재 구현과 100% 일치하는지 코드 리뷰

---

### 📊 Phase 3: Step 6 Phase 2 가이드 작성 (3-4시간)
**목표**: 차트 구현을 Phase 2로 연기한 이유와 향후 계획 문서화

**작업 단계**:
1. `docs/coin/mvp/step6_chart_guide.md` 생성:
   - Phase 2로 연기한 배경 (우선순위, 리소스)
   - 차트 구현 시 필요 사항:
     - 라이브러리 비교 (Recharts, Chart.js, Victory)
     - Equity Curve 계산 로직
     - 신호 오버레이 표시
   - 재평가 기준 (사용자 피드백, 리소스 가용성)
   - 추정 작업량 (3-5일)
   - 대안 (CSV 다운로드)
2. `ri_5.md` Step 6 섹션 업데이트:
   - 상태를 "Phase 2 검토"로 변경
   - 가이드 링크 추가

**예상 산출물**:
- `step6_chart_guide.md`
- 업데이트된 `ri_5.md`

**확인 방법**: Phase 2 팀이 가이드만으로 작업을 시작할 수 있는지 확인

---

### 🚀 Phase 4: GitHub Issue/PR 작업 (1-2시간)
**목표**: Issue #5 상태 업데이트 및 변경사항 머지

**작업 단계**:
1. GitHub Issue #5 업데이트:
   - Step 4/5 체크박스 체크
   - Step 6 상태를 "Phase 2 검토"로 변경
2. Pull Request 생성:
   - 브랜치: `coin-21` → `main`
   - 제목: `docs: Update Issue #5 status (Step 4/5 completed, Step 6 deferred)`
   - 설명: 검증 결과, 문서 변경 사항, Phase 2 계획
3. 리뷰 및 머지

**예상 산출물**:
- 머지된 PR
- 업데이트된 Issue #5

**의존성**: Phase 1-3 완료 후 진행

---

### 🔧 Phase 5: 누락 사항 보완 (필요 시, 0-8시간)
**목표**: Phase 1 검증에서 발견된 이슈 수정

**작업 단계**:
1. 검증 리포트의 이슈 분석
2. 버그 수정 (신호 미생성, UI 렌더링 오류 등)
3. 회귀 테스트 실행
4. 재검증

**예상 산출물**:
- 수정 커밋
- 회귀 테스트 결과

**확인 방법**: 모든 Acceptance Criteria 재통과

---

## 4. 위험 요소 및 불확실성

| 위험 | 영향 | 대응 방안 |
|------|------|----------|
| 신호가 생성되지 않음 (전략 파라미터 문제) | 높음 | 전략 파라미터 조정, 더 긴 기간 데이터 사용 |
| Frontend 정렬/색상 기능 미동작 | 중간 | SignalsTable.jsx 디버깅, PropTypes 검증 |
| 1000개 이상 신호 시 성능 저하 | 낮음 | 가상화 (react-window) 또는 페이지네이션 추가 |
| Phase 2 확장 계획 불명확 | 낮음 | Phase 2 킥오프 시점에 재논의 |
| 차트 라이브러리 선택 미결정 | 낮음 | 가이드에 비교표 추가, Phase 2에서 PoC 진행 |

---

## 5. 예상 일정

- **총 10-23시간** (2-3일)
- Phase 1 (Step 4 검증): 4-6시간
- Phase 2 (Step 5 문서화): 2-3시간
- Phase 3 (Step 6 가이드): 3-4시간
- Phase 4 (PR/머지): 1-2시간
- Phase 5 (이슈 보완): 0-8시간 (필요 시)

---

## 6. 다음 단계

1. Step 4 검증 착수: Docker Compose/로컬 환경 기동 → `POST /api/backtests/run` 실행 → 응답 JSON과 SignalsTable UI 캡처를 `docs/coin/mvp/step4_verification_report.md`에 정리
2. Step 5 문서 현행화: `docs/coin/mvp/ri_5.md`의 Step 5 섹션을 동기/비동기 플로우와 APISignal 스키마 예시로 업데이트 후 리뷰 요청
3. Step 6 차트 가이드: `docs/coin/mvp/step6_chart_guide.md` 초안을 작성하고 `ri_5.md`에서 상태를 "Phase 2 검토"로 명시해 링크 연결
4. GitHub 이슈/PR 업데이트: Issue #5 체크박스 정리, 브랜치 `coin-21`에서 문서 변경 PR 생성, 검증 결과/차트 계획을 PR 설명에 포함
5. Phase 2 킥오프 준비: 차트 라이브러리 비교, 비동기 API PoC 범위 확정, 필요 리소스(데이터/디자인) 확보 여부를 승인 단계에서 합의
