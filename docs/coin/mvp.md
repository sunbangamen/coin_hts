# Coin Trading MVP

## 1. 목표
- PSA-NEXT 코인 전략 검증 파이프라인에서 **웹 기반 MVP**를 가장 빠르게 가동한다.
- 핵심 전략(거래량 급증+장대양봉, 매물대 돌파)을 백테스트하고 시그널을 시각화하는 최소 기능 확보.
- 모든 원천 데이터와 실행 결과를 우선 로컬 워크스페이스에 저장하고, 이후 원드라이브 등 외부 스토리지로 이전해도 서비스 코드 변경이 최소화되도록 설계한다.

## 2. 데이터 운용
- **초기 보관**: 현재 리포지터리 내 `./data` 디렉터리를 공유 스토리지로 사용한다. 전략 설정, 백테스트 결과 JSON, 로그 등도 동일 루트 하위(`./data/results`, `./data/strategies`)에 기록한다.
- **마이그레이션 계획**: MVP 검증 이후 `/data/...` 또는 원드라이브 같은 외부 스토리지로 전체 폴더를 이동한다. 경로는 환경 변수(`DATA_ROOT`)로만 제어해 컨테이너/서비스가 동일 코드를 유지하도록 한다.
- **포맷**: 백테스트 엔진과 동일하게 심볼/타임프레임별 parquet + 실행 결과 JSON. 변환/업로드 배치는 후속 단계에서 추가.

## 3. 기술 스택
- **Backend**: FastAPI
  - 백테스트 실행 API, 시그널/결과 조회 API를 제공.
  - Celery/RQ 없이 동기 호출부터 시작, 응답 지연 시 태스크 큐 도입 고려.
  - 결과와 설정은 `DATA_ROOT` 아래 파일로 쓰고 읽는다.
- **Frontend**: React
  - 전략 파라미터 입력 폼, 결과 테이블, 시그널 로그 뷰를 우선 구현.
  - 디자인 시스템은 PSA-NEXT 공통 컴포넌트를 재사용.
- **Infra**: Docker Compose
  - `web`(React)과 `api`(FastAPI) 2개 컨테이너로 시작하며, 로컬 `./data` 폴더를 볼륨 마운트한다.
  - 향후 DB가 필요해지면 compose 서비스(`db`)를 추가하고 FastAPI 저장 로직을 교체한다.

## 4. 기능 범위 (MVP)
- **전략 관리**
  - 두 전략(`volume_long_candle`, `volume_zone_breakout`)만 노출, 파라미터 프리셋 수정 가능.
  - 심볼별 활성/비활성 토글 지원.
- **백테스트 실행**
  - 프론트에서 기간/타임프레임/전략 파라미터 입력 → FastAPI 동기 호출 → 결과 테이블 반환.
  - 결과 지표: 승률, 평균 수익률, 최대 낙폭, 샘플 수, 신호 목록(UTC) → React 테이블/차트.
- **시그널 뷰어**
  - 가장 최근 실행 결과를 WebSocket 없이 폴링 기반으로 출력.
  - 페이퍼 트레이딩/자동매매는 PDR에 맞춰 후속 단계로 미룬다.

## 5. 일정 초안
- **Week 1**: 데이터 경로 환경 변수화, FastAPI 기본 엔드포인트, React 입력 폼/테이블 목업.
- **Week 2**: 실제 백테스트 로직 연동, Docker Compose 통합, 결과 검증/QA.
- **Week 3**: 간단한 리포트 다운로드, 운영 가이드(README) 작성, 마이그레이션 체크리스트 초안.

## 6. 후속 과제
- 비동기 태스크 큐 도입 및 장기 러닝 잡 모니터링.
- 실시간 캔들 수집 파이프라인 → 페이퍼 트레이딩 레이어 확장.
- 운영/테스트 분리 DB 스키마 설계 및 마이그레이션 스크립트.
